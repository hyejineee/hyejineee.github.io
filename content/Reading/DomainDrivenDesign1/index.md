---
title: "[도메인 주도 설계] 1주차 스터디 "
path: blog/Reading/DDD1
tags: [Reading,OO,DDD,Git]
cover:  "./cover.png"
date: 2021-08-12
excerpt: 에릭 에반스, 도메인 주도 설계 1장 ~ 4장을 읽고 스터디한 내용을 정리합니다.
draft : false
---

## 도메인 주도 설계 : 소프트웨어의 복잡성을 다루는 지혜 - 에릭 에반스 

### 1주차 스터디

> "이 책의 요점은 하나의 모델이 구현, 설계, 의사소통의 기초가 돼야 한다는 것이다." - 41페이지

 작년에 실패했던 도메인 주도 설계 공부를 다시 시작하게 되었습니다. IDDD를 읽을 때는 정말 한 장 한 장 읽는 것이 고통스러웠는데 내성이 생긴 건지 아직까지는 괜찮게 읽어집니다. 

 이번 1회차 스터디에서는 1장에서 4장까지 읽어오고 스터디 시간에 책에 나온 모델링 과정을 실습하는 시간을 가졌습니다. 우리가 사용하는 포모도로를 도메인으로 잡고 도메인 전문가와 대화를 통해 관련된 규칙을 찾고 비슷하게 유비쿼터스 언어를 만들려는 노력도 하였습니다. 도메인 전문가와 대화를 통해서 도메인에서 필요한 모델을 찾고 정제하는 과정이 흥미로웠습니다.

 모델링 하는 과정은 매우 어려웠습니다. 모델을 생각하고, 모델의 명칭을 정하고, 이것이 우리가 해결하고자 하는 부분과 맞는지 생각하고, 또 구현과 더불어서 사용할 수 있는 모델인지 생각해야 했습니다. 우리가 '이게 맞는 건가?'라는 생각이 들었을 때는 책에서 나온 `크게 소리내어 모델링하기`를 사용하여 우리가 나누었던 대화에서 나온 내용을 명확한 명칭으로 정리하는 것으로 문제를 해결했습니다. 


## 1장 ~4장 요약 

### 서문

* 복잡성을 감당할 수 없다면 개발자는 더 쉽고 안전하게 변경하거나 확장할 수 있을 만큼 소프트웨어를 파악하지 못한다. 

* 수많은 애플리케이션에서 가장 중요한 복잡성은 기술적인 것이 아니라 사용자의 활동이나 업무에 해당하는 도메인 자체다. 이러한 도메인의 복잡성을 설계에서 제대로 다루지 않으면 기반 기술을 잘 이해하더라도 무용지물일 것이다. 

    1. 대부분의 소프트웨어 프로젝트에서는 가장 먼저 도메인과 도메인 로직에 집중해야한다.
    2. 복잡한 도메인 설계는 모델을 기반으로 해야 한다.

* 설계 개념은 성공적으로 구현해야 하며 그렇지 않으면 학문적 토론에 그치고 만다.

    1. 개발은 반복주기를 토대로 진행돼야 한다.
    2. 개발자와 도메인 전문가는 밀접한 관계에 있어야 한다.

* 도메인 모델은 어떤 특정한 다이어그램이 아니라 다이어그램이 전달하고자 하는 아이디어다. 도메인 모델은 단지 도메인 전문가의 머릿속에만 존재하는 지식이 아니라 해당 지식을 엄격하게 구성하고 선택적으로 추상화한 것이다.

* 도메인 주도 설계에서의 모델의 유용성 
    1. 모델과 핵심 설계는 서로 영향을 주며 구체화된다.
    2. 모델은 모든 팀 구성원이 사용하는 언어의 중추다.
    3. 모델은 지식의 정수만을 뽑아낸 것이다. 

### 1장 지식 탐구
* PCB 전문가와 대화 예제 
    * 아샬님 슬랙 
    ```
        대화, 발견, 학습, 개선은 1장에서 다루고 있는 내용 그대로입니다. 맨 처음에 도메인 전문가와 대화를 하는 예제가 나오는데, 그게 이 책의 전부라고 해도 과언이 아닙니다. 어떻게 했다고 나오죠? 대화를 통해서죠. 대화를 통해서 발견합니다. 지식을 탐구하고, 지속적인 학습을 한다고 이야기합니다. “사전” 같은 단계를 따로 구분하지 않습니다. 계속 이 과정을 반복하는 개선만 있는 거죠. 1장의 내용이 핵심이기 때문에 조금 이해가 안 돼도(왜냐면 도메인 지식을 담고 있기 때문이죠) 여러 번 읽고 곱씹어 보는 걸 강력히 추천합니다.
    ```
    *  12p 이처럼 프로토타입이 구체적이었던 덕분에 도메인 전문가는 모델이 의미하는 바와 동작하는 소프트웨어와 모델 간의 관계를 좀더 명확하게 이해할 수 있었다. 그다음부터는 모델에 관한 논의가 좀더 양방향으로 이루어졌는데, 이것은 내가 새로 알게 된 지식을 모델에 통합하고 다시 그것을 소프트웨어에 반영하는 과정을 도메인 전뭄가가 볼 수 있었기 때문이다. 

    * 우리는 모델을 정제했고, 그와 함께 코드도 발전했다.

    * 효과적인 모델링의 요소 
        1. 모델과 구현의 연계 
        2. 모델을 기반으로 하는 언어 정제 
        3. 풍부한 지식이 담긴 모델 개발 
        4. 모델의 정제 
        5. 브레인 스토밍과 실험

    * 풍부한 지식이 담긴 모델을 발견하고 그러한 모델의 정제를 가능하케 하는 것은 바로 브레인 스토밍과 수차례에 걸친 실험으로 얻은 창의성이다. 이러한 창의성은 모델 기반 언어에서 십분 확용 되고, 구현을 통한 피드백 고리로 갈고 닦인다. 이런 식의 지식 탐구는 팀 내 지식을 가치있는 모델로 만든다. 

    * 모델은 도메인을 이해하는 데 실용적이고 유용해야 한다. 또한 모델은 쉽게 구현하고 이해하기에 충분할 만큼 엄밀해야 한다.

    * 지식 탐구 = 모델을 점점 향상시킴. 필요한 모델이 된다. 지식 탐구를 통해 실용적이 모델을 만든다. 

    * 지속적인 학습 
        * 지속적인 학습을 통해 애플리케이션의 목표를 분명하게 만든다. 
        * 다음 작업에 대한 지침이 될 수 있다(?)

    * 풍부한 도메인 지식이 담긴 설계 - 명시적인 설계 
        * 선박의 화물 운송 예약 애플리케이션 예제 - 초과 예약에 대한 정책
        * 명시적 설계의 이점
            * 초과 예약의 특성을 단순히 불분명한 계산에 불과한 것이 아니라 별개의 중요한 업무 규칙임을 알게되었다.
            * 프로그래머는 업무 전문가에게 그들이 이해할 수 있는 수준에서 기술적 산출물, 심지어 코드까지도 보여줄 수 있으며 이로써 피드백 고리도 완성된다.

    * 심층 모델
        * 지식 탐구를 하고 설계에 적용함으로 얻은 모델 
        * 지식 탐구, 지속적인 학습을 통해서 처음에는 나타나기 힘들지만 문제의 핵심을 관통하는 포착하기 힘든 추상화가 서서히 나타나기 시작한다. 

### 2장 의사소통과 언어 사용
* 도메인 모델은 소프트웨어 프로젝트를 위한 공통 언어의 핵심이 될 수 있다.
* 모델은 프로젝트에 참여한 사람들의 머릿속에 축적된 개념을 모아 놓은 것으로 도메인에 대한 통찰력을 반영하는 용어와 관계로 표현된다.
* 용어와 상호관계 
    * 기술적인 개발을 할 수 있을 만큼 충분히 정확하다.
    * 도메인에 맞게 조정된 언어의 의미체계를 제공 
    * 모델을 개발 활동과 결부시키고 모델을 코드와 연계하는 데 매우 중요한 연결고리 역할을 한다.

* **유비쿼터스 랭귀지**
    * 유연하고 풀부한 지식이 담긴 설계를 만들려면 다용도로 사용할 수 있는 팀의 공유 언어와 그 언어에 대한 활발한 실험이 필요하다.
    * 번역은 의사소통을 무디게 하고 지식 탐구를 빈약하게 만든다.
    * 보편 언어를 구성하는 어취에는 클래스와 주요한 연산의 이름이 있다. 이 언어에는 모델 내애서 명식적으로 드러나는 규칙을 통론하기 위한 용어가 포함된다.
    * 모델을 언어의 근간으로 사용할 것 
    * 보편 언어의 변화 == 모델의 변화 
    * 보편 언어는 동적인 형태로 지식을 전달한다. 
* 화물의 운송 항로 고안하기 예제
    * 시나리오 1과 2의 비교 => 2에서 명칭을 통일시키고 같은 용어를 사용함으로 대화를 더욱 명확하게 만들었다.
* 크게 소리내어 모델링하기 
    * 모델을 정제하는 방법 
    * 모델을 정제하는 가장 좋은 방법은 가능한 모델 변형을 구성하는 다양한 요소를 큰 고리로 말하면서 말하기를 통해 살펴보는 것이다.
* 애자일 프로세스에서는 애플리케이션을 충분히 구체화할 지식을 초반에 갖출 수 있는 경우가 거의 없으므로 프로젝트가 진행되면서 요구사항 또한 발전한다고 본다. 정제된 보편 언어로 요구사항을 재구성하는 일이 이러한 발전 과정의 일부여야 한다.

* 41p : 이 책의 요점은 하나의 모델이 구현, 설계, 의사소통의 기초가 돼야 한다는 것이다.

### 3장.모델과 구현의 연계 

* 도메인 주도 설계에서는 초기 분석 단계에 도움될 뿐만 아니라 설계의 기반이 되는 모델이 필요하다.
* **모델 주도 설계**
    * 코드와 그것이 기반이 되는 모델이 긴밀하게 연결되면 코드에 의미가 부여되고 모델과 코드가 서로 대응하게 된다.

    * 설계 혹은 설계의 주된 부분이 도메인 모델과 대응하지 않는다면 그 모델은 그다지 가치가 없으며 소프트웨어의 정확함도 의심스러워진다.
        * 모델과 설계의 복잡한 대응 : 이해하기 힘들고, 실제로 설계가 변경되면 유지 보수가 불가능해진다.
    
    * 소프트웨어 시스템의 일부를 설계할 때는 도메인 모델을 있는 그대로 반영해서 설계와 모델의 대응을 분명하게 하라.
* 도메인 주도 설계는 모델을 동작하게 만들어 애플리케이션의 문제를 해결한다. 지식 탐구를 바탕으로 팀은 혼란스러운 정보의 거센 흐름 속에서 정수를 추출해 실제적인 모델로 만든다. 모델 주도 설계는 모델과 구현을 매우 밀접하게 연결한다. 보편 언어는 개발자와 도메인 전문가, 소프트웨어 사이에 흐르는 모든 정보의 통로에 해당한다.

### 4장 도메인의 격리 
* 우리는 시스템에서 도메인과 관련이 적은 기능으로부터 도메인 객체를 분리할 필요가 있으며, 그렇게 해서 도메인 개념을 다른 소프트웨어 기술에만 관련된 개념과 홍동하거나, 또는 시스템이라는 하나의 큰 덩어리 안에서 도메인을 전쳐 바라보지 못하는 문제를 방지할 수 있다.

* **계층형 아키텍처**
    * 도메인에 관련된 코드가 상당한 양의 도메인과 관려이 없는 다른 코드를 통해 널리 확산될 경우 도메인에 관련된 코드를 확인하고 추론하기가 굉장히 힘들어진다.
    * 매우 복잡한 작업을 처리하는 소프트웨어를 만들 경우 관심사의 분리가 필요하며, 이로써 격리된 상태에 있는 각 설계 요소에 집중할 수 있다.

    * 계층화의 핵심 원칙은 한 계층의 모든 요소는 오직 같은 계층에 존재하는 다른 요소나 계층상 `아래`에 위치한 요소에만 의존해야한다는 것이다.

    * 모델 주도 설계를 사능케 하는 것은 결정적으로 도메인 계층을 분리하는데 있다.

    * 도메인 계층 
        * 도메인 모델은 일련의 개념을 모아놓은 것
        * 도메인 계층은 그러한 모델과 설계 요소에 직접적으로 관계돼 있는 모든 것들을 명시한 것이다.
        * 모델 주도 설계에서는 도메인 계층의 소프트웨어 구성물이 모델의 개념을 반영한다.









